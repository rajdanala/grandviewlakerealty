(function(a){var b=a.fn.exposure=function(c){var f="0.9.1";var j;var h={target:"#exposure",showThumbs:true,showControls:true,imageControls:false,controls:{prevNext:true,firstLast:true,pageNumbers:true},carouselControls:false,enableSlideshow:true,slideshowControlsTarget:null,autostartSlideshow:false,slideshowDelay:3000,onSlideshowPlayed:function(){},onSlideshowPaused:function(){},showCaptions:true,showExtraData:true,dataTarget:null,controlsTarget:null,onThumb:function(i){},onImage:function(o,i,n){a(".exposureWrapper > .exposureLastImage").remove()},onCarousel:function(i,n){},onNext:function(){},onPrev:function(){},onPageChanged:function(){a(".exposureThumbs li.current").show().each(function(n){var o=a(this).find("img").height();if(o>0){a(this).height(o)}})},onPagingLink:function(i){return i},separatePageBrowsing:false,loop:true,onEndOfLoop:function(){},pageSize:5,viewFirstImage:true,visiblePages:5,preloadBuffer:3,keyboardNavigation:true,clickingNavigation:true,fixedContainerSize:false,maxWidth:null,maxHeight:null,stretchToMaxSize:false,fullScreen:false,onEnterFullScreen:function(i){i.show()},onExitFullScreen:function(i,n){i.hide();n.hide()},showThumbToolTip:true,showThumbCaption:true,onEmpty:function(){a(".exposureThumbs").hide();a(a.exposure.target).remove();if(a.exposure.showControls){a(a.exposure.controlsTarget).remove()}if(a.exposure.slideshowControlsTarget){a(a.exposure.slideshowControlsTarget).remove()}},onInit:function(){},allowDuplicates:true,jsonSource:null};var e=a.extend(h,c);for(j in e){if(b.defined(h[j])){a.exposure[j]=e[j]}}if(!a(a.exposure.target).length){a('<div id="exposure"></div>').insertBefore(a(this))}var k=a('<div class="exposureWrapper"></div>');var m=a(a.exposure.target).addClass("exposureTarget").append(k);if(a.exposure.showCaption||a.exposure.showExtraData){var d="";if(a.exposure.showCaptions){d+='<div class="caption"></div>'}if(a.exposure.showExtraData){d+='<div class="extra"></div>'}var g=a(d);if(g.length){if(a.exposure.dataTarget&&a(a.exposure.dataTarget).length){a(a.exposure.dataTarget).addClass("exposureData").append(g)}else{a.exposure.dataTarget=null;m.append(a('<div class="exposureData"></div>').append(g))}}}if(!a.exposure.showThumbs){a.exposure.carouselControls=false}if(a.exposure.carouselControls||!a.exposure.controlsTarget||(!a.exposure.controls.prevNext&&!a.exposure.controls.firstLast&&!a.exposure.controls.pageNumbers)){a.exposure.showControls=false}if(a.exposure.showControls){a(a.exposure.controlsTarget).addClass("exposureControls").each(function(){if(a.exposure.controls.firstLast){a(this).append(a('<a class="exposureFirstPage" href="javascript:void(0);">'+a.exposure.texts.first+"</a>").click(a.exposure.first))}if(a.exposure.controls.prevNext){a(this).append(a('<a class="exposurePrevPage" href="javascript:void(0);">'+a.exposure.texts.previous+"</a>").click(a.exposure.prev))}if(a.exposure.controls.pageNumbers){a(this).append(a('<div class="exposurePaging"></div>'))}if(a.exposure.controls.prevNext){a(this).append(a('<a class="exposureNextPage" href="javascript:void(0);">'+a.exposure.texts.next+"</a>").click(a.exposure.next))}if(a.exposure.controls.firstLast){a(this).append(a('<a class="exposureLastPage" href="javascript:void(0);">'+a.exposure.texts.last+"</a>").click(a.exposure.last))}})}if(a.exposure.enableSlideshow&&a.exposure.slideshowControlsTarget){a(a.exposure.slideshowControlsTarget).addClass("exposureSlideshowControls").each(function(){a(this).append(a('<a class="exposurePlaySlideshow" href="javascript:void(0);">'+a.exposure.texts.play+"</a>").click(a.exposure.playSlideshow));a(this).append(a('<a class="exposurePauseSlideshow" href="javascript:void(0);">'+a.exposure.texts.pause+"</a>").hide().click(a.exposure.pauseSlideshow))})}if(a.exposure.keyboardNavigation){a(document).bind("keyup","left",a.exposure.prevImage);a(document).bind("keyup","right",a.exposure.nextImage);a(document).bind("keyup","ctrl+left",a.exposure.prevPage);a(document).bind("keyup","ctrl+right",a.exposure.nextPage);a(document).bind("keyup","up",a.exposure.lastImage);a(document).bind("keyup","down",a.exposure.firstImage);a(document).bind("keyup","ctrl+up",a.exposure.lastPage);a(document).bind("keyup","ctrl+down",a.exposure.firstPage);if(a.exposure.enableSlideshow){a(document).bind("keyup","space",a.exposure.toggleSlideshow)}}if(a.exposure.fullScreen){a(window).resize(a.exposure.fitToWindow);a('<div class="exposureMask"></div>').click(a.exposure.exitFullScreen).insertAfter(m);if(a.exposure.keyboardNavigation){a(document).bind("keyup","esc",a.exposure.exitFullScreen)}}var l=null;if(a.exposure.jsonSource){if(b.object(a.exposure.jsonSource)){l=a.exposure.jsonSource}else{if(a.exposure.jsonSource.length){if(b.startsWith(a.exposure.jsonSource,"http://")||b.startsWith(a.exposure.jsonSource,"https://")){l=a.ajax({url:a.exposure.jsonSource,type:"GET",async:false}).responseText}else{l=a.exposure.jsonSource}}}}return this.addClass("exposureThumbs").each(function(){var t;if(l){var v=b.object(l)?l:a.parseJSON(l);if(v&&v.data){for(t in v.data){var u=v.data[t];if(u.source&&u.source.length){var n=a("<li></li>");var p=a("<a></a>").attr("href",u.source);if(u.thumb_source&&u.thumb_source.length){var o=a("<img />").attr("src",u.thumb_source);if(u.caption&&u.caption.length){o.attr("title",u.caption)}p.append(o)}else{if(u.caption&&u.caption.length){p.attr("title",u.caption)}}n.append(p);if(u.extra_data&&u.extra_data.length){n.append(a(u.extra_data))}a(this).append(n)}}}}var q=false;var s=false;if(a(this).children("li").length){var r=null;a(this).show().children("li").each(function(){q=true;var w=a(this).find("a");if(w.length){w=a(w[0]);var x=w.attr("href");var A=w.find("img");var B=A.length?A.attr("src"):w.attr("rel");var z=A.length?A.attr("title"):w.attr("title");var i=w.hasClass("selected")&&!r;w.remove();var C=a(this).html();if(B){s=true}a(this).remove();var y=b.newImage(x,B,z,C);if(y>-1){if(i){r=y}if(b.loadQueue.length<a.exposure.preloadBuffer){b.addToLoadQueue(y)}}}else{a(this).remove()}});if(!a.exposure.showThumbs){a.exposure.pageSize=1;a(".exposureThumbs").remove()}if(q){b.preloadNextInQueue();b.createPaging();if(r){a.exposure.goToPage(a.exposure.pageNumberForImage(r));a.exposure.viewImage(r)}else{a.exposure.goToPage(1)}if(a.exposure.enableSlideshow&&a.exposure.autostartSlideshow){a.exposure.playSlideshow()}}else{a.exposure.onEmpty()}}else{a.exposure.onEmpty()}a.exposure.onInit();b.initialized=true})};b.defined=function(c){return typeof c!=="undefined"};b.object=function(c){return typeof c==="object"};b.startsWith=function(c,d){if(c&&d){return c.match("^"+d)===d}return false};b.widthDiff=function(c){return c?c.outerWidth(true)-c.width():0};b.heightDiff=function(c){return c?c.outerHeight(true)-c.height():0};b.Image=function(e,c,d,f){this.src=e;this.thumb=c;this.caption=d;this.data=f;this.loaded=false};b.images=[];b.sources={};b.newImage=function(d,g,h,e){var f=b.defined(b.sources[d]);if(f&&!a.exposure.allowDuplicates){return -1}var i=new b.Image(d,g,h,e);var c=b.images.push(i)-1;if(!f){b.sources[d]=c}return c};b.initialized=false;b.current=-1;b.deselectCurrentImage=function(){b.current=-1;a(".exposureThumbs li.active").removeClass("active")};b.loadQueue=[];b.addToLoadQueue=function(c){if(!b.loaded(c)&&!b.queued(c)){b.loadQueue.push(c)}};b.queued=function(c){return a.inArray(c,b.loadQueue)>-1};b.loaded=function(d){var c=a.exposure.getImage(d);if(c!==null){return c.loaded}return false};b.nextInLoadQueue=function(){var c;if(b.loadQueue.length>0){var d=b.loadQueue.shift();if(b.loaded(d)){c=a.inArray(index,b.loadQueue);b.loadQueue.splice(c,1);return b.nextInLoadQueue()}return d}return null};b.preloadNextInQueue=function(){if(b.loadQueue.length>0){var c=b.nextInLoadQueue();if(c!==null){b.loadImage(c,b.preloadNextInQueue)}}};b.loadPage=function(d,e){if(b.validPage(d)){var f=d*a.exposure.pageSize;var c=f-a.exposure.pageSize;if(f>b.images.length){f=b.images.length}b.pageTransition=true;b.viewThumbs(c,f-1);if(!a.exposure.separatePageBrowsing){if(e){a.exposure.viewImage(e)}else{if(d>1||((d===1&&a.exposure.viewFirstImage)||b.initialized)){a.exposure.viewImage(c)}}}b.pageTransition=false}};b.viewThumbs=function(c,g){var f;if(a.exposure.showThumbs){for(f=c;f<=g;f++){b.viewThumb(f,f===c,f===g,true)}if(!a.exposure.carouselControls&&b.currentPage<a.exposure.numberOfPages()){var d=g+1;var e=g+a.exposure.pageSize;if(e>=b.images.length){e=b.images.length-1}for(f=d;f<=e;f++){var h=b.viewThumb(f,f===d,f===e,false);if(h&&h.length){h.hide()}}}}};b.viewThumb=function(g,d,f,c){if(g<0){g=b.images.length+g}else{if(g>=b.images.length){g=g-b.images.length}}var e=b.images[g];var h=a.exposure.getThumb(g).parent();if(!h.length){h=b.createThumbForImage(e,g);h.attr("rel",a.exposure.pageNumberForImage(g))}if(h.length){h.parent().append(h);if(d){h.addClass("first")}else{h.removeClass("first")}if(f){h.addClass("last")}else{h.removeClass("last")}if(c){if(a.exposure.carouselControls){h.show()}else{h.addClass("current")}}}return h};b.loadImage=function(d,c){var g=a.exposure.getImage(d);var e=a("<img />").addClass("exposureImage");var f;if(g!==null){g.loaded=true;if(b.queued(d)){f=a.inArray(d,b.loadQueue);b.loadQueue.splice(f,1)}if(typeof c==="function"){e.load(c)}e.attr("src",g.src)}return e};b.createThumbForImage=function(f,g){if(a.exposure.showThumbs){var e=a.exposure.getThumb(g);if(e===null||!e.length){var i=a("<li></li>");a(".exposureThumbs").append(i);e=a("<img />");if(f.thumb){e.attr("src",f.thumb)}else{e.attr("src",f.src);var h=Math.ceil(e.width()/e.height()*i.height());var d=Math.ceil(e.height()/e.width()*i.width());if(h<d){e.css({height:"auto",maxWidth:i.width()})}else{e.css({width:"auto",maxHeight:i.height()})}}i.append(e.css("display","block"));e.attr("rel",g);if(f.caption&&a.exposure.showThumbToolTip){e.attr("title",f.caption)}if(f.caption&&a.exposure.showThumbCaption){var c=a('<div class="thumbCaption" />').css({display:"none"}).html(f.caption).attr("title",f.caption);i.append(c)}e.data("data",f.data);e.click(function(){a.exposure.viewImage(Number(a(this).attr("rel")))});e.load(function(){var j=a(this).height();var k=a(this).siblings("div").css({display:""}).length>0;if(j>0){j=k?j+12:j;a(this).parent().height(j)}else{if(k){a(this).parent().height("102px")}}}).each(function(){if(this.complete){a(this).trigger("load")}});a.exposure.onThumb(e);return i}}return null};b.currentPage=1;b.validPage=function(c){return c>0&&c<=a.exposure.numberOfPages()};b.createPaging=function(){var c;if(a.exposure.showControls&&a.exposure.controls.pageNumbers){var d=a.exposure.imageControls?a.exposure.numberOfImages():a.exposure.numberOfPages();a(".exposurePaging").each(function(){for(c=1;c<=d;c++){a(this).append(b.newPagingLink(c))}})}};b.updatePaging=function(c){if(a.exposure.showControls&&a.exposure.controls.pageNumbers){var g=a.exposure.imageControls?b.current+1:b.currentPage;a(".exposurePaging span.active").each(function(){a(this).replaceWith(b.newPagingLink(g))});a('.exposurePaging a[rel="'+c+'"]').each(function(){a(this).replaceWith(a("<span>"+c+"</span>").addClass("active"))});var h=a.exposure.imageControls?a.exposure.numberOfImages():a.exposure.numberOfPages();if(a.exposure.visiblePages>0&&h>a.exposure.visiblePages){var f=c;var e=a.exposure.visiblePages;var d=Math.floor(a.exposure.visiblePages/2);if(c<=d){f=1}else{if(c>(h-d)){e=h;f=e-a.exposure.visiblePages+1}else{f-=d;e=f+a.exposure.visiblePages-1}}a(".exposurePaging").each(function(){a(this).children().each(function(j){var k=j+1;if(k>=f&&k<=e){a(this).show()}else{a(this).hide()}})})}}};b.newPagingLink=function(c){return a.exposure.onPagingLink(a('<a href="javascript:void(0);" rel="'+c+'">'+c+"</a>").click(function(){var d=Number(a(this).attr("rel"));if(a.exposure.imageControls){a.exposure.viewImage(d-1)}else{a.exposure.goToPage(d)}}))};b.pageTransition=false;b.playingSlideshow=false;b.slideshowTimer=null;b.slideshowTransition=false;b.slideshow=function(){b.slideshowTimer=setTimeout(function(){b.slideshowTransition=true;a.exposure.nextImage();b.slideshowTransition=false;b.slideshow()},a.exposure.slideshowDelay)};b.infullScreen=false;b.actualMaxWidth=function(c,d){return a.exposure.maxWidth?a.exposure.maxWidth-(b.widthDiff(c)+b.widthDiff(d)):0};b.actualMaxHeight=function(c,d){return a.exposure.maxHeight?a.exposure.maxHeight-(b.heightDiff(c)+b.heightDiff(d)):0};b.fitToMaxSize=function(f){var d=a(".exposureTarget");if(a.exposure.stretchToMaxSize){if(a.exposure.maxWidth){f.width(b.actualMaxWidth(f,d))}if(a.exposure.maxHeight){f.height(b.actualMaxHeight(f,d))}}else{if(f.width()>f.height()){b.fitToMaxWidth(f,d);b.fitToMaxHeight(f,d)}else{if(f.height()>f.width()){b.fitToMaxHeight(f,d);b.fitToMaxWidth(f,d)}else{var e=b.actualMaxHeight(f,d);var c=b.actualMaxWidth(f,d);if(!c||(e&&c&&e<c)){c=e}if(c&&f.width()>c){f.width(c);f.height(c)}}}}};b.centerImageInWindow=function(c){var d=a(".exposureTarget");d.width(c.width()).height(c.height());d.css({top:(a(window).height()-d.outerHeight(true))/2,left:(a(window).width()-d.outerWidth(true))/2});a(".exposureLastImage").each(function(){a(this).css({top:(d.height()-a(this).height())/2,left:(d.width()-a(this).width())/2})})};b.fitToMaxWidth=function(f,e){var c=b.actualMaxWidth(f,e);if(c&&f.width()>c){var d=Math.round(c*f.height()/f.width());f.height(d);f.width(c)}};b.fitToMaxHeight=function(f,d){var e=b.actualMaxHeight(f,d);if(e&&f.height()>e){var c=Math.round(e*f.width()/f.height());f.width(c);f.height(e)}};b.resizeContainer=function(c){b.fitToMaxSize(c);if(!a.exposure.fixedContainerSize){a(".exposureTarget").show().width(c.width()).height(c.height())}};a.extend({exposure:{pageNumberForImage:function(c){return Math.ceil((c+1)/a.exposure.pageSize)},numberOfPages:function(){return a.exposure.pageNumberForImage(b.images.length-1)},atFirstPage:function(){return b.currentPage===1},atLastPage:function(){return b.currentPage===a.exposure.numberOfPages()},firstImageOnPage:function(c){if(!c){c=b.current}return a.exposure.pageSize===1||(c%a.exposure.pageSize===0)},lastImageOnPage:function(g){if(!g){g=b.current}var h=b.images.length;if(a.exposure.pageSize===1||h===1){return true}if(g>0){var d=a.exposure.pageSize;var e=a.exposure.pageNumberForImage(g);if(e===a.exposure.numberOfPages()){var f=h%a.exposure.pageSize;if(f>0){d=f}}var c=g;if(e>1){c-=(e-1)*a.exposure.pageSize}return(c+1)%d===0}return false},currentPage:function(){return b.currentPage},numberOfImages:function(){return b.images.length},atFirstImage:function(){return b.current===0},atLastImage:function(){return b.current===a.exposure.numberOfImages()-1},getImage:function(c){if(c!==null&&c>-1&&c<b.images.length){return b.images[c]}return null},indexOfImage:function(c){if(c&&b.defined(b.sources[c])){return b.sources[c]}return -1},currentImage:function(){return b.current},addImage:function(d,g,f,e){var k=a.exposure.numberOfPages();var h=b.newImage(d,g,f,e);if(h>-1){var i=a.exposure.pageNumberForImage(h);var c=a('.exposureThumbs li[rel="'+i+'"]');if(c.length){c.removeClass("last")}var j=i>k;if(j){a(".exposurePaging").empty();b.createPaging()}if(j||i===b.currentPage){a.exposure.goToPage(b.currentPage)}}},removeImage:function(g){if(b.images.length===1){a.exposure.removeAllImages()}else{if(a.exposure.enableSlideshow){a.exposure.pauseSlideshow()}var c=a.exposure.numberOfPages();b.images.splice(g,1);var f=a.inArray(g,b.loadQueue);if(f>-1){b.loadQueue.splice(f,1)}var h=a.exposure.getThumb(g).parent();h.remove();a(".exposureThumbs > li").each(function(j){if(j>=g){var k=a.exposure.pageNumberForImage(j);a(this).attr("rel",k);a(this).find("img").attr("rel",j);if(a.exposure.firstImageOnPage(j)){a(this).addClass("first")}else{a(this).removeClass("first")}if(a.exposure.lastImageOnPage(j)){a(this).addClass("last")}else{a(this).removeClass("last")}if(b.currentPage===k){a(this).show()}else{a(this).hide()}}});var d=a.exposure.numberOfPages<c;if(d){a(".exposurePaging").empty();b.createPaging()}if(b.current===g){b.current=-1;var e=g;if(g===a.exposure.numberOfImages()){e=0}a.exposure.viewImage(e)}}},removeAllImages:function(){b.images=[];b.sources={};b.loadQueue=[];if(a.exposure.enableSlideshow){a.exposure.pauseSlideshow()}a(".exposureThumbs").empty();a(".exposurePaging").empty();a.exposure.viewImage(0)},getThumb:function(c){return a('.exposureThumbs img[rel="'+c+'"]')},getNextImage:function(){if(b.current===b.images.length-1){if(a.exposure.loop){return 0}else{a.exposure.onEndOfLoop()}}else{return b.current+1}return null},getPrevImage:function(){if(b.current===0){if(a.exposure.loop){return b.images.length-1}}else{return b.current-1}return null},goToPage:function(d,c){if(b.validPage(d)){a(".exposureThumbs li").removeClass("current").hide();b.loadPage(d,c);if(!a.exposure.imageControls){b.updatePaging(d)}b.currentPage=d;if(a.exposure.showControls){if(a.exposure.atFirstPage()){if(a.exposure.controls.firstLast){a(".exposureFirstPage").addClass("disabled")}if(!a.exposure.loop&&a.exposure.controls.prevNext){a(".exposurePrevPage").hide()}}else{if(a.exposure.controls.firstLast){a(".exposureFirstPage").removeClass("disabled")}if(!a.exposure.loop&&a.exposure.controls.prevNext){a(".exposurePrevPage").show()}}if(a.exposure.atLastPage()){if(a.exposure.controls.firstLast){a(".exposureLastPage").addClass("disabled")}if(!a.exposure.loop&&a.exposure.controls.prevNext){a(".exposureNextPage").hide()}}else{if(a.exposure.controls.firstLast){a(".exposureLastPage").removeClass("disabled")}if(!a.exposure.loop&&a.exposure.controls.prevNext){a(".exposureNextPage").show()}}}if(!a.exposure.carouselControls){a.exposure.onPageChanged()}}},firstPage:function(){if(!a.exposure.atFirstPage()){a.exposure.goToPage(1)}},lastPage:function(){if(!a.exposure.atLastPage()){a.exposure.goToPage(a.exposure.numberOfPages())}},prevPage:function(){if(!a.exposure.atFirstPage()){a.exposure.goToPage(b.currentPage-1)}else{if(a.exposure.loop){a.exposure.goToPage(a.exposure.numberOfPages())}}},nextPage:function(){if(!a.exposure.atLastPage()){a.exposure.goToPage(b.currentPage+1)}else{if(a.exposure.loop){a.exposure.goToPage(1)}}},viewImage:function(l){if(b.current!==l){if(a.exposure.enableSlideshow&&!b.slideshowTransition){}var g=a(".exposureWrapper");var n=false;var h=b.images[l];if(h){var c=h.src;var m=h.caption;var f=h.data;if(c){n=true;var p=a.exposure.showThumbs;var d=null;if(a.exposure.showThumbs){d=a('.exposureThumbs img[rel="'+l+'"]');p=d&&d.length;if(p){d.parent().siblings().removeClass("active");d.parent().addClass("active")}else{a(".exposureThumbs li.active").removeClass("active")}}g.parent().removeClass("exposureLoaded");if(b.loaded(l)){g.parent().addClass("exposureLoaded")}var o=b.loadImage(l,function(){var r=g.find(".exposureImage");if(r.length){r.removeClass("exposureCurrentImage");r.addClass("exposureLastImage")}a(this).addClass("exposureCurrentImage");g.append(a(this));if(a.exposure.clickingNavigation){a(this).click(a.exposure.nextImage)}if(!a(this).width()||!a(this).height()){var t=a(this);var v=setInterval(function(){b.resizeContainer(t);clearTimeout(v)},2)}else{b.resizeContainer(a(this))}if(a.exposure.fullScreen&&!b.infullScreen){a.exposure.onEnterFullScreen(a(".exposureMask"));b.infullScreen=true}var q=a.exposure.dataTarget?a(a.exposure.dataTarget):g.siblings(".exposureData");if(q.length){if(a.exposure.showCaptions){var s=q.find(".caption");if(s.length){s.empty();if(!m&&p){m=d.attr("title")}}s.html(m)}if(a.exposure.showExtraData){var u=q.find(".extra");if(u.length){u.empty();if(!f&&p){f=d.data("data")}u.html(f)}}}a.exposure.onImage(a(this),q,d);b.preloadNextInQueue()})}}if(!n){g.siblings().andSelf().empty();a(".exposureThumbs li.active").removeClass("active")}if(a.exposure.imageControls){var j=a.exposure.pageNumberForImage(l);if(b.currentPage!==j&&!b.pageTransition){a.exposure.goToPage(j,l)}b.updatePaging(l+1)}b.current=l;if(a.exposure.carouselControls&&b.images.length>a.exposure.pageSize){var k=l;var i=a.exposure.pageSize-1;var e=Math.floor(a.exposure.pageSize/2);if(!a.exposure.loop&&l<e){k=0}else{if(!a.exposure.loop&&l>=(b.images.length-e)){i=b.images.length-1;k=i-a.exposure.pageSize}else{k-=e;i=k+a.exposure.pageSize-1}}a.exposure.onCarousel(k,i);a(".exposureThumbs li").removeClass("current").hide();b.viewThumbs(k,i);b.currentPage=a.exposure.pageNumberForImage(l)}}},firstImage:function(){if(!a.exposure.atFirstImage()){if(a.exposure.separatePageBrowsing||a.exposure.atFirstPage()){a.exposure.viewImage(0)}else{a.exposure.goToPage(1)}}},nextImage:function(){if(!a.exposure.separatePageBrowsing&&a.exposure.lastImageOnPage()){if(a.exposure.atLastPage()&&a.exposure.loop){a.exposure.goToPage(1)}else{a.exposure.goToPage(b.currentPage+1)}a.exposure.onNext()}else{var c=a.exposure.getNextImage();if(c!==null){a.exposure.viewImage(c);a.exposure.onNext()}}var d=a.exposure.getNextImage();if(d!==null){b.addToLoadQueue(d)}},prevImage:function(){if(!a.exposure.separatePageBrowsing&&a.exposure.firstImageOnPage()){if(a.exposure.atFirstPage()&&a.exposure.loop){a.exposure.goToPage(a.exposure.numberOfPages(),a.exposure.numberOfImages()-1)}else{var d=b.currentPage-1;a.exposure.goToPage(d,d*a.exposure.pageSize-1)}a.exposure.onPrev()}else{var e=a.exposure.getPrevImage();if(e!==null){a.exposure.viewImage(e);a.exposure.onPrev()}}var c=a.exposure.getPrevImage();if(c!==null){b.addToLoadQueue(c)}},lastImage:function(){if(!a.exposure.atLastImage()){if(a.exposure.separatePageBrowsing||a.exposure.atLastPage()){a.exposure.viewImage(a.exposure.numberOfImages()-1)}else{a.exposure.goToPage(a.exposure.numberOfPages(),a.exposure.numberOfImages()-1)}}},playSlideshow:function(){if(!b.playingSlideshow){if(a.exposure.slideshowControlsTarget){a(".exposurePlaySlideshow").hide();a(".exposurePauseSlideshow").show()}b.slideshow();b.playingSlideshow=true}a.exposure.onSlideshowPlayed()},pauseSlideshow:function(){if(b.playingSlideshow){if(a.exposure.slideshowControlsTarget){a(".exposurePlaySlideshow").show();a(".exposurePauseSlideshow").hide()}b.playingSlideshow=false;if(b.slideshowTimer){clearTimeout(b.slideshowTimer)}a.exposure.onSlideshowPaused()}},toggleSlideshow:function(){if(b.playingSlideshow){a.exposure.pauseSlideshow()}else{a.exposure.playSlideshow()}},first:function(){if(a.exposure.imageControls){a.exposure.firstImage()}else{a.exposure.firstPage()}},prev:function(){if(a.exposure.imageControls){a.exposure.prevImage()}else{a.exposure.prevPage()}},next:function(){if(a.exposure.imageControls){a.exposure.nextImage()}else{a.exposure.nextPage()}},last:function(){if(a.exposure.imageControls){a.exposure.lastImage()}else{a.exposure.lastPage()}},exitFullScreen:function(){if(b.infullScreen){a.exposure.pauseSlideshow();b.deselectCurrentImage();a.exposure.onExitFullScreen(a(".exposureTarget"),a(".exposureMask"));b.infullScreen=false}},fitToWindow:function(){a.exposure.maxWidth=a(window).width();a.exposure.maxHeight=a(window).height();var c=a(".exposureCurrentImage").width("auto").height("auto");b.fitToMaxSize(c);if(!c.width()||!c.height()){var d=setInterval(function(){b.centerImageInWindow(c);clearTimeout(d)},2)}else{b.centerImageInWindow(c)}},texts:{first:"First",previous:"Prev",next:"Next",last:"Last",play:"Play slideshow",pause:"Pause slideshow"}}})})(jQuery);(function(a){a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function b(c){if(typeof c.data!=="string"){return}var e=c.handler,d=c.data.toLowerCase().split(" ");c.handler=function(f){if(this!==f.target&&(/textarea|select/i.test(f.target.nodeName)||f.target.type==="text")){return}var k=f.type!=="keypress"&&a.hotkeys.specialKeys[f.which],h=String.fromCharCode(f.which).toLowerCase(),m,o="",n={};if(f.altKey&&k!=="alt"){o+="alt+"}if(f.ctrlKey&&k!=="ctrl"){o+="ctrl+"}if(f.metaKey&&!f.ctrlKey&&k!=="meta"){o+="meta+"}if(f.shiftKey&&k!=="shift"){o+="shift+"}if(k){n[o+k]=true}else{n[o+h]=true;n[o+a.hotkeys.shiftNums[h]]=true;if(o==="shift+"){n[a.hotkeys.shiftNums[h]]=true}}for(var g=0,j=d.length;g<j;g++){if(n[d[g]]){return e.apply(this,arguments)}}}}a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery);
/* Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
!function(ag,ad,ae,aj){function ak(f,d,e){return setTimeout(b6(f,e),d)}function ah(f,d,e){return Array.isArray(f)?(ai(f,e[d],e),!0):!1}function ai(h,d,f){var g;if(h){if(h.forEach){h.forEach(d,f)}else{if(h.length!==aj){for(g=0;g<h.length;){d.call(f,h[g],g,h),g++}}else{for(g in h){h.hasOwnProperty(g)&&d.call(f,h[g],g,h)}}}}}function aG(i,d,g){for(var h=Object.keys(d),j=0;j<h.length;){(!g||g&&i[h[j]]===aj)&&(i[h[j]]=d[h[j]]),j++}return i}function bA(d,c){return aG(d,c,!0)}function aD(j,g,h){var f,i=g.prototype;f=j.prototype=Object.create(i),f.constructor=j,f._super=i,h&&aG(f,h)}function b6(d,c){return function(){return d.apply(c,arguments)}}function cd(d,c){return typeof d==bU?d.apply(c?c[0]||aj:aj,c):d}function aa(d,c){return d===aj?c:d}function b9(f,d,e){ai(bX(d),function(a){f.addEventListener(a,e,!1)})}function ca(f,d,e){ai(bX(d),function(a){f.removeEventListener(a,e,!1)})}function bZ(d,c){for(;d;){if(d==c){return !0}d=d.parentNode}return !1}function b0(d,c){return d.indexOf(c)>-1}function bX(b){return b.trim().split(/\s+/g)}function bY(h,f,g){if(h.indexOf&&!g){return h.indexOf(f)}for(var e=0;e<h.length;){if(g&&h[e][g]==f||!g&&h[e]===f){return e}e++}return -1}function b3(b){return Array.prototype.slice.call(b,0)}function b4(j,h,i){for(var m=[],n=[],k=0;k<j.length;){var l=h?j[k][h]:j[k];bY(n,l)<0&&m.push(j[k]),n[k]=l,k++}return i&&(m=h?m.sort(function(d,b){return d[h]>b[h]}):m.sort()),m}function b1(i,d){for(var h,l,j=d[0].toUpperCase()+d.slice(1),k=0;k<bW.length;){if(h=bW[k],l=h?h+j:d,l in i){return l}k++}return aj}function be(){return bd++}function bR(d){var c=d.ownerDocument;return c.defaultView||c.parentWindow}function bS(f,d){var e=this;this.manager=f,this.callback=d,this.element=f.element,this.target=f.options.inputTarget,this.domHandler=function(a){cd(f.options.enable,[f])&&e.handler(a)},this.init()}function bP(f){var d,e=f.options.inputClass;return new (d=e?e:af?bD:aX?bu:aY?bs:bG)(f,bK)}function bK(j,h,i){var m=i.pointers.length,n=i.changedPointers.length,k=h&aI&&m-n===0,l=h&(av|a4)&&m-n===0;i.isFirst=!!k,i.isFinal=!!l,k&&(j.session={}),i.eventType=h,bH(j,i),j.emit("hammer.input",i),j.recognize(i),j.session.prevInput=i}function bH(m,k){var l=m.session,p=k.pointers,q=p.length;l.firstInput||(l.firstInput=bO(k)),q>1&&!l.firstMultiple?l.firstMultiple=bO(k):1===q&&(l.firstMultiple=!1);var n=l.firstInput,o=l.firstMultiple,s=o?o.center:n.center,t=k.center=bL(p);k.timeStamp=aw(),k.deltaTime=k.timeStamp-n.timeStamp,k.angle=bz(s,t),k.distance=bC(s,t),bI(l,k),k.offsetDirection=bB(k.deltaX,k.deltaY),k.scale=o?bF(o.pointers,p):1,k.rotation=o?ar(o.pointers,p):0,bN(l,k);var r=m.element;bZ(k.srcEvent.target,r)&&(r=k.srcEvent.target),k.target=r}function bI(i,g){var h=g.center,k=i.offsetDelta||{},l=i.prevDelta||{},j=i.prevInput||{};(g.eventType===aI||j.eventType===av)&&(l=i.prevDelta={x:j.deltaX||0,y:j.deltaY||0},k=i.offsetDelta={x:h.x,y:h.y}),g.deltaX=l.x+(h.x-k.x),g.deltaY=l.y+(h.y-k.y)}function bN(n,d){var m,q,o,p,t=n.lastInterval||d,u=d.timeStamp-t.timeStamp;if(d.eventType!=a4&&(u>bn||t.velocity===aj)){var r=t.deltaX-d.deltaX,s=t.deltaY-d.deltaY,v=bM(u,r,s);q=v.x,o=v.y,m=bi(v.x)>bi(v.y)?v.x:v.y,p=bB(r,s),n.lastInterval=d}else{m=t.velocity,q=t.velocityX,o=t.velocityY,p=t.direction}d.velocity=m,d.velocityX=q,d.velocityY=o,d.direction=p}function bO(f){for(var d=[],e=0;e<f.pointers.length;){d[e]={clientX:az(f.pointers[e].clientX),clientY:az(f.pointers[e].clientY)},e++}return{timeStamp:aw(),pointers:d,center:bL(d),deltaX:f.deltaX,deltaY:f.deltaY}}function bL(j){var g=j.length;if(1===g){return{x:az(j[0].clientX),y:az(j[0].clientY)}}for(var h=0,f=0,i=0;g>i;){h+=j[i].clientX,f+=j[i].clientY,i++}return{x:az(h/g),y:az(f/g)}}function bM(f,d,e){return{x:d/f||0,y:e/f||0}}function bB(d,c){return d===c?aW:bi(d)>=bi(c)?d>0?a6:aB:c>0?a9:ay}function bC(j,g,h){h||(h=au);var f=g[h[0]]-j[h[0]],i=g[h[1]]-j[h[1]];return Math.sqrt(f*f+i*i)}function bz(j,g,h){h||(h=au);var f=g[h[0]]-j[h[0]],i=g[h[1]]-j[h[1]];return 180*Math.atan2(i,f)/Math.PI}function ar(d,c){return bz(c[1],c[0],a2)-bz(d[1],d[0],a2)}function bF(d,c){return bC(c[0],c[1],a2)/bC(d[0],d[1],a2)}function bG(){this.evEl=a0,this.evWin=aF,this.allow=!0,this.pressed=!1,bS.apply(this,arguments)}function bD(){this.evEl=bf,this.evWin=ao,bS.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function bE(){this.evTarget=am,this.evWin=aJ,this.started=!1,bS.apply(this,arguments)}function bt(h,f){var g=b3(h.touches),e=b3(h.changedTouches);return f&(av|a4)&&(g=b4(g.concat(e),"identifier",!0)),[g,e]}function bu(){this.evTarget=at,this.targetIds={},bS.apply(this,arguments)}function br(l,j){var k=b3(l.touches),o=this.targetIds;if(j&(aI|ba)&&1===k.length){return o[k[0].identifier]=!0,[k,k]}var p,m,n=b3(l.changedTouches),q=[],r=this.target;if(m=k.filter(function(b){return bZ(b.target,r)}),j===aI){for(p=0;p<m.length;){o[m[p].identifier]=!0,p++}}for(p=0;p<n.length;){o[n[p].identifier]&&q.push(n[p]),j&(av|a4)&&delete o[n[p].identifier],p++}return q.length?[b4(m.concat(q),"identifier",!0),q]:void 0}function bs(){bS.apply(this,arguments);var b=b6(this.handler,this);this.touch=new bu(this.manager,b),this.mouse=new bG(this.manager,b)}function bx(d,c){this.manager=d,this.set(c)}function an(f){if(b0(f,aR)){return aR}var d=b0(f,aS),e=b0(f,aZ);return d&&e?aS+" "+aZ:d||e?d?aS:aZ:b0(f,aT)?aT:bJ}function bv(b){this.id=be(),this.manager=null,this.options=bA(b||{},this.defaults),this.options.enable=aa(this.options.enable,!0),this.state=a5,this.simultaneous={},this.requireFail=[]}function bw(b){return b&aA?"cancel":b&aM?"end":b&a1?"move":b&aU?"start":""}function bl(b){return b==ay?"down":b==a9?"up":b==a6?"left":b==aB?"right":""}function bm(f,d){var e=d.manager;return e?e.get(f):f}function bj(){bv.apply(this,arguments)}function aL(){bj.apply(this,arguments),this.pX=null,this.pY=null}function bo(){bj.apply(this,arguments)}function by(){bv.apply(this,arguments),this._timer=null,this._input=null}function aC(){bj.apply(this,arguments)}function b2(){bj.apply(this,arguments)}function b7(){bv.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function b8(d,c){return c=c||{},c.recognizers=aa(c.recognizers,b8.defaults.preset),new b5(d,c)}function b5(d,c){c=c||{},this.options=bA(c,b8.defaults),this.options.inputTarget=this.options.inputTarget||d,this.handlers={},this.session={},this.recognizers=[],this.element=d,this.input=bP(this),this.touchAction=new bx(this,this.options.touchAction),bg(this,!0),ai(c.recognizers,function(f){var e=this.add(new f[0](f[1]));f[2]&&e.recognizeWith(f[2]),f[3]&&e.requireFailure(f[3])},this)}function bg(f,d){var e=f.element;ai(f.options.cssProps,function(c,b){e.style[b1(e.style,b)]=d?c:""})}function bV(f,e){var b=ad.createEvent("Event");b.initEvent(f,!0,!0),b.gesture=e,e.target.dispatchEvent(b)}var bW=["","webkit","moz","MS","ms","o"],bT=ad.createElement("div"),bU="function",az=Math.round,bi=Math.abs,aw=Date.now,bd=1,aE=/mobile|tablet|ip(ad|hone|od)|android/i,aY="ontouchstart" in ag,af=b1(ag,"PointerEvent")!==aj,aX=aY&&aE.test(navigator.userAgent),ax="touch",a3="pen",aq="mouse",bQ="kinect",bn=25,aI=1,ba=2,av=4,a4=8,aW=1,a6=2,aB=4,a9=8,ay=16,bp=a6|aB,bq=a9|ay,aV=bp|bq,au=["x","y"],a2=["clientX","clientY"];bS.prototype={handler:function(){},init:function(){this.evEl&&b9(this.element,this.evEl,this.domHandler),this.evTarget&&b9(this.target,this.evTarget,this.domHandler),this.evWin&&b9(bR(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ca(this.element,this.evEl,this.domHandler),this.evTarget&&ca(this.target,this.evTarget,this.domHandler),this.evWin&&ca(bR(this.element),this.evWin,this.domHandler)}};var al={mousedown:aI,mousemove:ba,mouseup:av},a0="mousedown",aF="mousemove mouseup";aD(bG,bS,{handler:function(d){var c=al[d.type];c&aI&&0===d.button&&(this.pressed=!0),c&ba&&1!==d.which&&(c=av),this.pressed&&this.allow&&(c&av&&(this.pressed=!1),this.callback(this.manager,c,{pointers:[d],changedPointers:[d],pointerType:aq,srcEvent:d}))}});var bh={pointerdown:aI,pointermove:ba,pointerup:av,pointercancel:a4,pointerout:a4},aK={2:ax,3:a3,4:aq,5:bQ},bf="pointerdown",ao="pointermove pointerup pointercancel";ag.MSPointerEvent&&(bf="MSPointerDown",ao="MSPointerMove MSPointerUp MSPointerCancel"),aD(bD,bS,{handler:function(k){var i=this.store,j=!1,n=k.type.toLowerCase().replace("ms",""),o=bh[n],l=aK[k.pointerType]||k.pointerType,m=l==ax,p=bY(i,k.pointerId,"pointerId");o&aI&&(0===k.button||m)?0>p&&(i.push(k),p=i.length-1):o&(av|a4)&&(j=!0),0>p||(i[p]=k,this.callback(this.manager,o,{pointers:i,changedPointers:[k],pointerType:l,srcEvent:k}),j&&i.splice(p,1))}});var aO={touchstart:aI,touchmove:ba,touchend:av,touchcancel:a4},am="touchstart",aJ="touchstart touchmove touchend touchcancel";aD(bE,bS,{handler:function(f){var d=aO[f.type];if(d===aI&&(this.started=!0),this.started){var e=bt.call(this,f,d);d&(av|a4)&&e[0].length-e[1].length===0&&(this.started=!1),this.callback(this.manager,d,{pointers:e[0],changedPointers:e[1],pointerType:ax,srcEvent:f})}}});var bk={touchstart:aI,touchmove:ba,touchend:av,touchcancel:a4},at="touchstart touchmove touchend touchcancel";aD(bu,bS,{handler:function(f){var d=bk[f.type],e=br.call(this,f,d);e&&this.callback(this.manager,d,{pointers:e[0],changedPointers:e[1],pointerType:ax,srcEvent:f})}}),aD(bs,bS,{handler:function(j,g,h){var f=h.pointerType==ax,i=h.pointerType==aq;if(f){this.mouse.allow=!1}else{if(i&&!this.mouse.allow){return}}g&(av|a4)&&(this.mouse.allow=!0),this.callback(j,g,h)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var a7=b1(bT.style,"touchAction"),a8=a7!==aj,aH="compute",bJ="auto",aT="manipulation",aR="none",aS="pan-x",aZ="pan-y";bx.prototype={set:function(b){b==aH&&(b=this.compute()),a8&&(this.manager.element.style[a7]=b),this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return ai(this.manager.recognizers,function(a){cd(a.options.enable,[a])&&(b=b.concat(a.getTouchAction()))}),an(b.join(" "))},preventDefaults:function(j){if(!a8){var h=j.srcEvent,i=j.offsetDirection;if(this.manager.session.prevented){return void h.preventDefault()}var m=this.actions,n=b0(m,aR),k=b0(m,aZ),l=b0(m,aS);return n||k&&i&bp||l&&i&bq?this.preventSrc(h):void 0}},preventSrc:function(b){this.manager.session.prevented=!0,b.preventDefault()}};var a5=1,aU=2,a1=4,aM=8,aN=aM,aA=16,ap=32;bv.prototype={defaults:{},set:function(b){return aG(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(d){if(ah(d,"recognizeWith",this)){return this}var c=this.simultaneous;return d=bm(d,this),c[d.id]||(c[d.id]=d,d.recognizeWith(this)),this},dropRecognizeWith:function(b){return ah(b,"dropRecognizeWith",this)?this:(b=bm(b,this),delete this.simultaneous[b.id],this)},requireFailure:function(d){if(ah(d,"requireFailure",this)){return this}var c=this.requireFail;return d=bm(d,this),-1===bY(c,d)&&(c.push(d),d.requireFailure(this)),this},dropRequireFailure:function(d){if(ah(d,"dropRequireFailure",this)){return this}d=bm(d,this);var c=bY(this.requireFail,d);return c>-1&&this.requireFail.splice(c,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(b){return !!this.simultaneous[b.id]},emit:function(h){function f(a){g.manager.emit(g.options.event+(a?bw(e):""),h)}var g=this,e=this.state;aM>e&&f(!0),f(),e>=aM&&f(!0)},tryEmit:function(b){return this.canEmit()?this.emit(b):void (this.state=ap)},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(ap|a5))){return !1}b++}return !0},recognize:function(d){var c=aG({},d);return cd(this.options.enable,[this,c])?(this.state&(aN|aA|ap)&&(this.state=a5),this.state=this.process(c),void (this.state&(aU|a1|aM|aA)&&this.tryEmit(c))):(this.reset(),void (this.state=ap))},process:function(){},getTouchAction:function(){},reset:function(){}},aD(bj,bv,{defaults:{pointers:1},attrTest:function(d){var c=this.options.pointers;return 0===c||d.pointers.length===c},process:function(j){var g=this.state,h=j.eventType,f=g&(aU|a1),i=this.attrTest(j);return f&&(h&a4||!i)?g|aA:f||i?h&av?g|aM:g&aU?g|a1:aU:ap}}),aD(aL,bj,{defaults:{event:"pan",threshold:10,pointers:1,direction:aV},getTouchAction:function(){var d=this.options.direction,c=[];return d&bp&&c.push(aZ),d&bq&&c.push(aS),c},directionTest:function(j){var h=this.options,i=!0,m=j.distance,n=j.direction,k=j.deltaX,l=j.deltaY;return n&h.direction||(h.direction&bp?(n=0===k?aW:0>k?a6:aB,i=k!=this.pX,m=Math.abs(j.deltaX)):(n=0===l?aW:0>l?a9:ay,i=l!=this.pY,m=Math.abs(j.deltaY))),j.direction=n,i&&m>h.threshold&&n&h.direction},attrTest:function(b){return bj.prototype.attrTest.call(this,b)&&(this.state&aU||!(this.state&aU)&&this.directionTest(b))},emit:function(d){this.pX=d.deltaX,this.pY=d.deltaY;var c=bl(d.direction);c&&this.manager.emit(this.options.event+c,d),this._super.emit.call(this,d)}}),aD(bo,bj,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[aR]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&aU)},emit:function(d){if(this._super.emit.call(this,d),1!==d.scale){var c=d.scale<1?"in":"out";this.manager.emit(this.options.event+c,d)}}}),aD(by,bv,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[bJ]},process:function(i){var g=this.options,h=i.pointers.length===g.pointers,e=i.distance<g.threshold,j=i.deltaTime>g.time;if(this._input=i,!e||!h||i.eventType&(av|a4)&&!j){this.reset()}else{if(i.eventType&aI){this.reset(),this._timer=ak(function(){this.state=aN,this.tryEmit()},g.time,this)}else{if(i.eventType&av){return aN}}}return ap},reset:function(){clearTimeout(this._timer)},emit:function(b){this.state===aN&&(b&&b.eventType&av?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=aw(),this.manager.emit(this.options.event,this._input)))}}),aD(aC,bj,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[aR]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||this.state&aU)}}),aD(b2,bj,{defaults:{event:"swipe",threshold:10,velocity:0.65,direction:bp|bq,pointers:1},getTouchAction:function(){return aL.prototype.getTouchAction.call(this)},attrTest:function(f){var d,e=this.options.direction;return e&(bp|bq)?d=f.velocity:e&bp?d=f.velocityX:e&bq&&(d=f.velocityY),this._super.attrTest.call(this,f)&&e&f.direction&&f.distance>this.options.threshold&&bi(d)>this.options.velocity&&f.eventType&av},emit:function(d){var c=bl(d.direction);c&&this.manager.emit(this.options.event+c,d),this.manager.emit(this.options.event,d)}}),aD(b7,bv,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[aT]},process:function(k){var e=this.options,j=k.pointers.length===e.pointers,n=k.distance<e.threshold,l=k.deltaTime<e.time;if(this.reset(),k.eventType&aI&&0===this.count){return this.failTimeout()}if(n&&l&&j){if(k.eventType!=av){return this.failTimeout()}var m=this.pTime?k.timeStamp-this.pTime<e.interval:!0,o=!this.pCenter||bC(this.pCenter,k.center)<e.posThreshold;this.pTime=k.timeStamp,this.pCenter=k.center,o&&m?this.count+=1:this.count=1,this._input=k;var p=this.count%e.taps;if(0===p){return this.hasRequireFailures()?(this._timer=ak(function(){this.state=aN,this.tryEmit()},e.interval,this),aU):aN}}return ap},failTimeout:function(){return this._timer=ak(function(){this.state=ap},this.options.interval,this),ap},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==aN&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),b8.VERSION="2.0.4",b8.defaults={domEvents:!1,touchAction:aH,enable:!0,inputTarget:null,inputClass:null,preset:[[aC,{enable:!1}],[bo,{enable:!1},["rotate"]],[b2,{direction:bp}],[aL,{direction:bp},["swipe"]],[b7],[b7,{event:"doubletap",taps:2},["tap"]],[by]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var aP=1,aQ=2;b5.prototype={set:function(b){return aG(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?aQ:aP},recognize:function(i){var g=this.session;if(!g.stopped){this.touchAction.preventDefaults(i);var h,k=this.recognizers,l=g.curRecognizer;(!l||l&&l.state&aN)&&(l=g.curRecognizer=null);for(var j=0;j<k.length;){h=k[j],g.stopped===aQ||l&&h!=l&&!h.canRecognizeWith(l)?h.reset():h.recognize(i),!l&&h.state&(aU|a1|aM)&&(l=g.curRecognizer=h),j++}}},get:function(f){if(f instanceof bv){return f}for(var d=this.recognizers,e=0;e<d.length;e++){if(d[e].options.event==f){return d[e]}}return null},add:function(d){if(ah(d,"add",this)){return this}var c=this.get(d.options.event);return c&&this.remove(c),this.recognizers.push(d),d.manager=this,this.touchAction.update(),d},remove:function(d){if(ah(d,"remove",this)){return this}var c=this.recognizers;return d=this.get(d),c.splice(bY(c,d),1),this.touchAction.update(),this},on:function(f,d){var e=this.handlers;return ai(bX(f),function(b){e[b]=e[b]||[],e[b].push(d)}),this},off:function(f,d){var e=this.handlers;return ai(bX(f),function(b){d?e[b].splice(bY(e[b],d),1):delete e[b]}),this},emit:function(h,f){this.options.domEvents&&bV(h,f);var g=this.handlers[h]&&this.handlers[h].slice();if(g&&g.length){f.type=h,f.preventDefault=function(){f.srcEvent.preventDefault()};for(var e=0;e<g.length;){g[e](f),e++}}},destroy:function(){this.element&&bg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},aG(b8,{INPUT_START:aI,INPUT_MOVE:ba,INPUT_END:av,INPUT_CANCEL:a4,STATE_POSSIBLE:a5,STATE_BEGAN:aU,STATE_CHANGED:a1,STATE_ENDED:aM,STATE_RECOGNIZED:aN,STATE_CANCELLED:aA,STATE_FAILED:ap,DIRECTION_NONE:aW,DIRECTION_LEFT:a6,DIRECTION_RIGHT:aB,DIRECTION_UP:a9,DIRECTION_DOWN:ay,DIRECTION_HORIZONTAL:bp,DIRECTION_VERTICAL:bq,DIRECTION_ALL:aV,Manager:b5,Input:bS,TouchAction:bx,TouchInput:bu,MouseInput:bG,PointerEventInput:bD,TouchMouseInput:bs,SingleTouchInput:bE,Recognizer:bv,AttrRecognizer:bj,Tap:b7,Pan:aL,Swipe:b2,Pinch:bo,Rotate:aC,Press:by,on:b9,off:ca,each:ai,merge:bA,extend:aG,inherit:aD,bindFn:b6,prefixed:b1}),typeof define==bU&&define.amd?define(function(){return b8}):"undefined"!=typeof module&&module.exports?module.exports=b8:ag[ae]=b8}(window,document,"Hammer");parent.$("#Close").click(function(){parent.$.fn.colorbox.close()});(function(a){if(!a.focusFx){a.focusFx={}}a.extend(a.focusFx,{photoCount:0,canMaintain:false,slideShowInit:function(){parent.$("#Print").click(function(){window.focus();DoPrintWithBrowserCheck(window)});parent.$("#ViewFullImage").click(function(){var g=(a(".exposureCurrentImage").attr("src")||a("#gallerySingle img").attr("src"));var h="a[href$='"+g.substr(g.lastIndexOf("/")+1)+"']";var f=a(h,"#fullImageLinks").attr("href");if(f!==undefined&&f!=""){window.open(f,"_blank").focus()}});parent.$("#cboxTitle").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="slideshowCounter"></span>');if(a("#galleryView ul.exposure").length>0){loadExposure();var d=document.getElementById("exposure");var e=new Hammer(d);e.on("swipe",function(f){if(f.pointerType=="touch"){if(f.direction==Hammer.DIRECTION_LEFT){a.exposure.nextImage()}else{if(f.direction=Hammer.DIRECTION_RIGHT){a.exposure.prevImage()}}}});a("#galleryView").fadeIn()}else{if(a("#galleryView li").length>0){loadGalleryView();a("#galleryView").fadeIn()}else{a("#gallerySingle").fadeIn();parent.$("#ToggleSS").hide();a(".exposureData").show();a("#gallerySingle>img, .exposureData").hover(function(){a(".exposureData").stop().animate({bottom:"0"},{queue:false,duration:1000})},function(){a(".exposureData").stop().animate({bottom:"-160px"},{queue:false,duration:1000})});var c=a("#gallerySingle>img");centerPrimaryImage(c)}}if(a.focusFx.canMaintain){var b=parent.parent.parent.getAppHeight();b=b>900?850:b-50;parent.$("#cboxClose").append('<button id="maintainPhoto">Maintain</button>');parent.$("#maintainPhoto").insertBefore("#ToggleSS").click(function(){var f=maintainUrl;parent.$.fn.colorbox({href:f,iframe:true,width:"990px",height:b+"px",title:"Picture Administration - "+displayId,close:'<button id="Close">Cancel</button>',onClosed:false})})}}})})(jQuery);function toggleGalleryViewSlideShow(){if($("#photos").hasClass("paused")){$(this).text("Stop Slideshow");$("#photos").removeClass("paused")}else{$(this).text("Start Slideshow");$("#photos").addClass("paused")}}function loadGalleryView(){parent.$("#ToggleSS").click(toggleGalleryViewSlideShow);$("#photos").galleryView({show_panels:true,show_filmstrip:true,panel_width:640,panel_height:480,frame_width:96,frame_height:72,start_frame:startIndex,filmstrip_size:20,transition_speed:800,transition_interval:4000,overlay_opacity:0.7,frame_opacity:0.3,pointer_size:8,nav_theme:"dark",easing:"swing",filmstrip_position:"bottom",overlay_position:"bottom",panel_scale:"nocrop",frame_scale:"crop",frame_gap:5,show_captions:false,fade_panels:true,pause_on_hover:false,filmstrip_position:"bottom",onShowItem:function(b,a){var c="Showing "+b+" of "+a;parent.$("#slideshowCounter").html(c)}});parent.$("#ToggleSS").click()}var slideShowRunning=false;function toggleExposureSlideShow(){if($(this).text()=="Start Slideshow"){slideShowRunning=true;$(this).text("Stop Slideshow");$.exposure.playSlideshow()}else{slideShowRunning=false;$(this).text("Start Slideshow");$.exposure.pauseSlideshow()}}function centerPrimaryImage(a){if(a.height===undefined||a.width===undefined){return}if(a.height()==0){a.onload=function(b){doImageCenter(a.height(),a.width())};return}doImageCenter(a.height(),a.width())}function loadExposure(){$.focusFx.photoCount=$("#photos li").length;$("#upArrow,#leftArrow").click(function(){$.exposure.prevImage();return true});$("#downArrow,#rightArrow").click(function(){$.exposure.nextImage();return true});parent.$("#ToggleSS").click(toggleExposureSlideShow);$("#photos").exposure({carouselControls:true,imageControls:true,pageSize:($.focusFx.photoPageSize||4),onThumb:function(a){var b=a.parents("li");var c=b.hasClass("active")?1:0.5;a.css({display:"none",opacity:c}).stop().fadeIn(200);a.hover(function(){a.fadeTo("fast",1)},function(){b.not(".active").children("img").fadeTo("fast",0.5)})},onImage:function(g,i,c){var a=$(".exposureWrapper").hasClass("exposureHover");$(".exposureWrapper > .exposureLastImage").stop().fadeOut(500,function(){$(this).remove()});var b="Showing "+(parseInt(c.attr("rel"),10)+1)+" of "+$.focusFx.photoCount;parent.$("#slideshowCounter").html(b);g.hide().stop().fadeIn(1000);var f=function(){var l=i.find(".caption").html();var k=i.find(".extra").html();return(l&&l.length>0)||(k&&k.length>0)};var e=function(){i.stop().show().animate({bottom:0+"px"},{queue:false,duration:1000})};var d=function(){if(!slideShowRunning){$(".exposureWrapper").addClass("exposureHover");var k=f();if(k){e.call()}}};var j=function(){var k=-i.outerHeight();i.stop().show().animate({bottom:k+"px"},{queue:false,duration:1000})};var h=function(){if(!slideShowRunning){$(".exposureWrapper").removeClass("exposureHover");if(f()){j.call()}}};if(slideShowRunning){if(f()){e.call()}else{j.call()}}$(".exposureWrapper, #rightArrow, #leftArrow").hover(d,h);i.hover(d,h);if(a){if(f()){e.call()}else{j.call()}}if($.exposure.showThumbs&&c&&c.length){c.parents("li").siblings().children("img.selected").stop().fadeTo(200,0.5,function(){$(this).removeClass("selected")});c.fadeTo("fast",1).addClass("selected")}centerPrimaryImage(g)},onCarousel:function(a,b){$(".exposureThumbs li").hide().children("img.selected").stop().css("opacity",0.5).removeClass("selected")},viewFirstImage:false});$.exposure.viewImage(--startIndex);$(".exposureThumbs").addClass("hideWhenPrinted");parent.$("#ToggleSS").click()};
